@inherits LayoutComponentBase

@page "/login"

<div class="col-12" style="margin-right: auto; margin-left: auto; max-width: 960px;">
    <RadzenCard class="p-5 w-100">
        <RadzenText TextStyle="TextStyle.H5" TagName="TagName.H2" class="mb-4">
            Login
        </RadzenText>
        <RadzenTemplateForm Data=@("SimpleLogin") Action="/">
            <RadzenLogin AllowRegister="false" AllowResetPassword="false" Login=@(args => OnLogin(args, "Simple login")) />
        </RadzenTemplateForm>
    </RadzenCard>
</div>

<br />
<p>@msg</p>
@code {
    string msg;

    void OnLogin(LoginArgs args, string name)
    {
        Tuple<bool, string> username = database.inputSanitization(args.Username);
        Tuple<bool, string> password = database.inputSanitization(args.Password);

        if (username.Item1 && password.Item1 && database.GetUser(username.Item2, password.Item2))
        {
            // login & set something to his or her login info (browser cookie? Microsoft Identity?)
            msg = "Welcome, " + username.Item2 + "!";
        }
        else
        {
            msg = "Invalid login credentials. Please contact a database administrator if you need a new account made.";
        }
    }
}